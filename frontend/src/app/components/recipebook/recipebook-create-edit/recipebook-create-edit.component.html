<h1 class="display-1">{{ heading }}</h1>

<form #form="ngForm" [class.was-validated]="form.submitted" (ngSubmit)="onSubmit(form)">
  <div class="form-group wrapper">
    <label for="name">Name: </label>
    <input  type="text"
            id="name"
            name="name"
            placeholder="Choose a name"
            [class]="'input-spacing'"
            [(ngModel)]="recipeBook.name"
            #nameModel="ngModel"
            required
          >
    <div class="invalid-feedback">
      Name is required
    </div>
  </div>
  <div class="form-group wrapper">
    <label for="description">Description: </label>
    <textarea id="description"
              class="form-control"
              placeholder="Enter a description for the recipe book"
              [(ngModel)]="recipeBook.description"
              name="description" >
    </textarea>
  </div>

  <div class="form-group wrapper">
    <label for="recipes">Select Recipes: </label>
    <table class="table align-baseline">
      <tbody>
      <div class="col-md-12" *ngFor="let recipe of recipes; index as i">
          <div class="form-group">
            <app-autocomplete
              id="recipes"
              name="recipes"
              [(ngModel)]="recipeBook.recipes"
              textInputClass="form-control"
              [class]="'autocomplete-spacing'"
              [formatModel]="formatRecipeName"
              valueNeedsToMatchSuggestion="true"
              [suggestions]="recipeSuggestions"
              (ngModelChange)="addRecipe($event)">
            </app-autocomplete>
          </div>
      </div>
      <tbody>
    </table>
  </div>

  <div class="form-group wrapper">
    <label for="users">Select Users: </label>
      <app-autocomplete
        id="users"
        name="users"
        [(ngModel)]="recipeBook.users"
        textInputClass="form-control"
        [class]="'autocomplete-spacing'"
        [formatModel]="formatUserName"
        valueNeedsToMatchSuggestion="true"
        [suggestions]="userSuggestions"
        (ngModelChange)="addUser($event)">
      </app-autocomplete>
  </div>

  <button [disabled]="!form.valid" type="submit" class="btn btn-primary">{{ submitButtonText }}</button>
</form>

