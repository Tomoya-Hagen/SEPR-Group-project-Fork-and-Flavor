<div style="position: relative; text-align: center;">
  <h1 class="display-5">{{ heading }}</h1>
</div>

<form #form="ngForm" [class.was-validated]="form.submitted" (ngSubmit)="onSubmit(form)">
  <div class="form-group wrapper">
    <h4 for="name">Name </h4>
    <input  type="text"
            id="name"
            name="name"
            placeholder="Choose a name"
            [class]="'input-spacing'"
            [(ngModel)]="recipeBook.name"
            #nameModel="ngModel"
            required
    >
    <div class="invalid-feedback">
      Name is required
    </div>
  </div>
  <div class="form-group wrapper">
    <h4 for="description">Description </h4>
    <textarea id="description"
              class="form-control"
              placeholder="Enter a description for the recipe book"
              [(ngModel)]="recipeBook.description"
              name="description" >
    </textarea>
  </div>

  <div>
    <h4>Recipes</h4>
    <div class="row">
      <div class="mb-2">
        <app-automatic-complete
          name="recipeSelection"
          textInputClass="form-control"
          [suggestions]="recipeSuggestions"
          [formatModel]="formatRecipeName"
          valueNeedsToMatchSuggestion="true"
          [(ngModel)]="dummyRecipeSelectionModel"
          (ngModelChange)="addRecipe($event)"
        >
        </app-automatic-complete>
      </div>

      <div>
        <table class="table align-baseline">
          <tbody>
          <tr *ngFor="let recipe of recipes; index as i">
            <td>{{formatRecipeName(recipe)}}</td>
            <td style="text-align: right;" class="min-width">
              <button type="button"
                      class="btn btn-light ms-2"
                      (click)="removeRecipe(i)"
                      [style.visibility]="recipe ? 'visible' : 'hidden'">
                <i class="bi-trash"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div>
    <h4>Users</h4>
    <div class="row">
      <div class="mb-2">
        <app-automatic-complete
          name="userSelection"
          textInputClass="form-control"
          [suggestions]="userSuggestions"
          [formatModel]="formatUserName"
          valueNeedsToMatchSuggestion="true"
          [(ngModel)]="dummyUserSelectionModel"
          (ngModelChange)="addUser($event)"
        >
        </app-automatic-complete>
      </div>

      <div>
        <table class="table align-baseline">
          <tbody>
          <tr *ngFor="let user of users; index as j">
            <td>{{formatUserName(user)}}</td>
            <td style="text-align: right;" class="min-width">
              <button type="button"
                      class="btn btn-light ms-2"
                      (click)="removeUser(j)"
                      [style.visibility]="user ? 'visible' : 'hidden'">
                <i class="bi-trash"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <button [disabled]="!form.valid || !isFormValid()" type="submit" class="btn btn-primary">{{ submitButtonText }}</button>
</form>

